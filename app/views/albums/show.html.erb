<div class="container mx-auto px-5">
  <div class="flex justify-between items-center mb-8">
    <h1 class="text-3xl font-bold"><%= @album.title %></h1>
    <%= link_to "Back to Albums", albums_path, class: "text-blue-600 hover:underline" %>
  </div>
  <p class="mb-8 text-gray-700"><%= @album.description %></p>

  <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
    <% @album.photos.each_with_index do |photo, idx| %>
      <div class="bg-white rounded-lg shadow-md overflow-hidden flex flex-col">
        <% if photo.image.attached? %>
          <img src="<%= url_for(photo.image) %>" alt="<%= photo.title %>" class="w-full h-64 object-cover cursor-pointer" onclick="showModal(<%= idx %>)" />
        <% else %>
          <div class="w-full h-64 bg-gray-200 flex items-center justify-center text-gray-500">No image</div>
        <% end %>
      </div>
    <% end %>
  </div>
<!-- Photo Modal HTML -->
<div id="photo-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70 opacity-0 pointer-events-none transition-opacity duration-300">
  <div id="modal-content" class="bg-white rounded-lg overflow-hidden shadow-lg transform scale-95 transition-transform duration-300 max-w-xl w-full">
    <button onclick="hideModal()" class="absolute top-2 right-2 text-gray-700 hover:text-black text-2xl">&times;</button>
    <img id="modal-image" src="" alt="" class="w-full max-h-[70vh] object-contain" />
    <div class="p-4">
      <h2 id="modal-title" class="text-lg font-semibold"></h2>
    </div>
  </div>
</div>
</div>

<script>
  document.addEventListener("turbo:load", function() {
    window.photoModalPhotos = [
      <% @album.photos.each do |photo| %>
        {
          url: "<%= url_for(photo.image) %>",
          title: "<%= j photo.title %>"
        },
      <% end %>
    ];
  });
</script>
<%= javascript_include_tag "photomodal" %>