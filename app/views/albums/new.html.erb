
<%= form_with(model: @album, url: albums_path, local: true) do |form| %>
  <div class="flex justify-between items-center mb-4">
    <div class="flex items-center gap-2">
      <%= form.label :title, class: "text-2xl font-bold" %>
      <%= form.text_field :title, class: "px-3 py-2 border rounded w-64 focus:outline-none focus:ring focus:border-blue-300" %>
    </div>
    <div>
      <%= form.submit "Create Album", class: "bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 font-semibold ml-4" %>
    </div>
  </div>
  <div class="mb-8">
    <%= form.label :description, class: "block text-black-700 font-semibold mb-2" %>
    <%= form.text_area :description, rows: 3, class: "px-3 py-2 border rounded w-64 focus:outline-none focus:ring focus:border-blue-300" %>
  </div>

  <h2 class="text-lg font-semibold mb-2">Select photos to add to this album:</h2>
  <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-8">
    <% current_user.photos.each do |photo| %>
      <label class="block cursor-pointer">
        <%= check_box_tag 'album[photos][]', photo.uuid, false, class: "hidden peer" %>
        <div class="peer-checked:ring-4 peer-checked:ring-blue-400 rounded-lg overflow-hidden border border-gray-200">
          <% if photo.image.attached? %>
            <img src="<%= url_for(photo.image) %>" alt="<%= photo.title %>" class="w-full h-32 object-cover" />
          <% else %>
            <div class="w-full h-32 bg-gray-200 flex items-center justify-center text-gray-500">No image</div>
          <% end %>
          <div class="p-2 text-sm text-gray-700"><%= photo.title %></div>
        </div>
      </label>
    <% end %>
  </div>

  <%= link_to "Back to Albums", albums_path, class: "text-blue-600 hover:underline" %>
<% end %>
